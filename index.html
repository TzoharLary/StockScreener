<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional stock analysis platform with real-time data, advanced filtering, watchlists, and comprehensive analytics">
    <title>Stock Screener Pro - Professional Stock Analysis Tool</title>
    <link rel="stylesheet" href="css/landing.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="landing-container">
        <div class="landing-card">
            <div class="landing-header">
                <h1 class="landing-title">ðŸ“Š STOCK SCREENER PRO</h1>
                <p class="landing-subtitle">Professional Stock Analysis Tool</p>
            </div>

            <ul class="features-list">
                <li class="feature-item">Real-time stock data from Twelve Data API</li>
                <li class="feature-item">Advanced filtering & screening capabilities</li>
                <li class="feature-item">Stock comparison tools</li>
                <li class="feature-item">Custom watchlists & portfolio tracking</li>
                <li class="feature-item">Multiple data visualizations</li>
                <li class="feature-item">Comprehensive fundamental analysis</li>
            </ul>

            <div class="landing-actions">
                <button class="landing-btn landing-btn-secondary" onclick="startDemo()">
                    <span class="btn-icon">ðŸŽ¬</span>
                    <span class="btn-text">Try Demo</span>
                    <span class="btn-subtext">with Sample Data</span>
                </button>
                <button class="landing-btn landing-btn-primary" onclick="enterApiKey()">
                    <span class="btn-icon">ðŸ”‘</span>
                    <span class="btn-text">Full Version</span>
                    <span class="btn-subtext">Enter API Key</span>
                </button>
            </div>
        </div>
    </div>

    <script src="js/storage-service.js"></script>
    <script>
        const storage = new StorageService();

        // Check if user is already authenticated
        window.addEventListener('DOMContentLoaded', () => {
            const apiKey = storage.getApiKey();
            const mode = storage.getUserMode();
            
            // If user has API key and is in full mode, redirect to app
            if (apiKey && apiKey !== 'demo' && mode === 'full') {
                window.location.href = 'app.html';
            }
            // If user is in demo mode, redirect to app
            else if (mode === 'demo') {
                window.location.href = 'app.html';
            }
        });

        function startDemo() {
            // Set demo mode
            storage.setUserMode('demo');
            storage.setApiKey('demo');
            
            // Redirect to app
            window.location.href = 'app.html';
        }

        function enterApiKey() {
            // Create and show modal
            const modal = createApiKeyModal();
            document.body.appendChild(modal);
            modal.style.display = 'flex';
            
            // Focus on input
            setTimeout(() => {
                document.getElementById('landing-api-input').focus();
            }, 100);
        }

        function createApiKeyModal() {
            const modal = document.createElement('div');
            modal.id = 'landing-api-modal';
            modal.style.cssText = `
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;

            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 15px;
                    padding: 2.5rem;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                    animation: slideUp 0.3s ease-out;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: #333; margin: 0;">Enter API Key</h2>
                        <button onclick="closeApiKeyModal()" style="
                            background: none;
                            border: none;
                            font-size: 2rem;
                            cursor: pointer;
                            color: #999;
                            line-height: 1;
                            padding: 0;
                            width: 30px;
                            height: 30px;
                        ">&times;</button>
                    </div>

                    <div style="background: #f8f9fa; padding: 1.25rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #667eea;">
                        <p style="margin: 0 0 0.75rem 0; font-weight: 600; color: #333;">How to get your free API key:</p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: #555;">
                            <li style="margin-bottom: 0.5rem;">Visit <a href="https://twelvedata.com/" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">twelvedata.com</a></li>
                            <li style="margin-bottom: 0.5rem;">Sign up for a free account</li>
                            <li style="margin-bottom: 0.5rem;">Copy your API key from the dashboard</li>
                            <li>Paste it below</li>
                        </ol>
                        <p style="margin: 0.75rem 0 0 0; font-size: 0.9rem; color: #667eea;">
                            <strong>Free tier includes 800 API credits per day!</strong>
                        </p>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label for="landing-api-input" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #555;">
                            Your API Key:
                        </label>
                        <input 
                            type="text" 
                            id="landing-api-input" 
                            placeholder="Enter your Twelve Data API key"
                            style="
                                width: 100%;
                                padding: 0.75rem;
                                border: 2px solid #e1e1e1;
                                border-radius: 8px;
                                font-size: 1rem;
                                font-family: 'Courier New', monospace;
                                transition: border-color 0.3s ease;
                            "
                            onkeypress="if(event.key === 'Enter') saveApiKeyFromLanding()"
                        >
                        <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                            Your API key will be stored securely in your browser
                        </p>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button onclick="closeApiKeyModal()" style="
                            flex: 1;
                            padding: 0.9rem;
                            background: #f8f9fa;
                            border: 2px solid #e1e1e1;
                            border-radius: 8px;
                            font-size: 1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        ">Cancel</button>
                        <button onclick="saveApiKeyFromLanding()" style="
                            flex: 1;
                            padding: 0.9rem;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            border: none;
                            border-radius: 8px;
                            font-size: 1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        ">Save & Continue</button>
                    </div>
                </div>
            `;

            // Close on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeApiKeyModal();
                }
            });

            return modal;
        }

        function closeApiKeyModal() {
            const modal = document.getElementById('landing-api-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        function saveApiKeyFromLanding() {
            const input = document.getElementById('landing-api-input');
            const apiKey = input.value.trim();

            if (!apiKey) {
                alert('Please enter an API key');
                return;
            }

            // Validate API key format (basic check)
            if (apiKey.length < 10) {
                alert('API key seems too short. Please check and try again.');
                return;
            }

            // Save API key and set full mode
            storage.setApiKey(apiKey);
            storage.setUserMode('full');

            // Show success and redirect
            alert('API key saved successfully! Redirecting to Stock Screener...');
            window.location.href = 'app.html';
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            @keyframes slideUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
